# 程序的机器级表示 #

## 历史观点 ##

## 程序编码 ##

1. C预处理器处理include和define等宏命令；编译器产生源文件的汇编代码（*.s）；汇编器将汇编代码转为二进制目标代码文件（*.o），目标代码包含所有指令的二进制表示，但没有填入全局值的地址；最后，链接器将目标代码与实现库（例如printf）的代码合并，产生可执行文件。
2. 对于机器级编程重要的两种抽象：

    - ISA，指令集体系结构或指令集架构，它定义了处理器状态、指令的格式，以及每条指令对状态的影响。
    - 虚拟地址，内存模型看上去是一个非常大的字节数组。
3. 机器代码可见的处理器状态信息：

    - PC，程序计数器（%rip），给出将要执行的下一条指令在内存中的地址。
    - 整数寄存器，包含16个命名的位置，分别存储64位的值。用来记录程序状态或保存临时数据。
    - 条件码寄存器，保存着最近执行的算术或逻辑指令的状态信息。用来实现控制或数据流中的条件变化。
    - 一组向量寄存器，存放一个或多个整数或浮点数值。

## 数据格式 ##

## 访问信息 ##

1. 整数寄存器。所有16个寄存器的低位部分都可以作为字节、字（16位）、双字（32位）和四字（64位）数字来访问：

| 64 | 32  | 16  | 8    |   描述    |
|----|-----|-----|------|-----------|
|rax |eax  |ax   | al   |返回值      |
|rbx |ebx  |bx   | bl   |被调用者保存 |
|rcx |ecx  |cx   | cl   |第4个参数   |
|rdx |edx  |dx   | dl   |第3个参数   |
|rsi |esi  |si   | sil  |第2个参数   |
|rdi |edi  |di   | dil  |第1个参数   |
|rbp |ebp  |bp   | bpl  |被调用者保存 |
|rsp |esp  |sp   | spl  |栈指针      |
|r8  |r8d  |r8w  | r8b  |第5个参数   |
|r9  |r9d  |r9w  | r9b  |第6个参数   |
|r10 |r10d |r10w | r10b |调用者保存  |
|r11 |r11d |r11w | r11b |调用者保存  |
|r12 |r12d |r12w | r12b |被调用者保存 |
|r13 |r13d |r13w | r13b |被调用者保存 |
|r14 |r14d |r14w | r14b |被调用者保存 |
|r15 |r15d |r15w | r15b |被调用者保存 |



