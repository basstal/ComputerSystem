# 链接 #

1. 链接器使得软件开发中**分离编译**成为可能，可以将大型的应用程序组织成更小、更好管理的模块，独立地修改和编译这些模块。

## 编译器驱动程序 ##

## 静态链接 ##

1. **静态链接器**以一组可重定位目标文件和命令行参数作为输入，生成一个完全链接的、可以加载和运行的可执行目标文件作为输出。

2. 链接器必须完成两个主要任务：
    - 符号解析，将每个符号引用（对应一个函数、一个全局变量或一个静态变量）关联到一个符号定义。
    - 重定位，链接器通过把每个符号定义与一个内存位置关联起来，从而重定位这些节，然后修改所有对这些符号的引用，使得它们指向这个内存位置。

## 目标文件 ##

1. 目标文件有三种形式：
    - 可重定位目标文件。可与其他可重定位目标文件合并起来，创建可执行目标文件。
    - 可执行目标文件。可以被直接复制到内存并执行。
    - 共享目标文件。特殊类型的可重定位目标文件，可以在加载或运行时被动态地加载进内存并链接。

## 可重定位目标文件 ##

1. 一个典型的ELF可重定位目标文件包含下面几个节：
    - .text     已编译程序的机器代码。
    - .rodata   只读数据（例如switch跳转表和printf中格式化字符串）。
    - .data     已初始化的全局和静态C变量。
    - .bss      未初始化的全局和静态C变量，以及所有被初始化为0的全局或静态变量。
    - .symtab   符号表，存放在程序中定义和引用的函数和全局变量的信息。
    - .rel.text 一个.text节中位置的列表，当链接器把这个目标文件和其他文件组合时，需要修改这些位置。
    - .rel.data 被模块引用或定义的所有全局变量的重定位信息。
    - .debug    调试符号表，只有-g才会得到这张表。
    - .line     
    - .strtab
## 符号和符号表 ##

1. 每个可重定位目标模块都有一个符号表，在链接器的上下文中，有三种不同的符号：
    - 由自己定义并能被其他模块引用的全局符号。对应于非静态的C函数和全局变量。
    - 由其他模块定义并被自己引用的全局符号。称为外部符号，对应其他模块中定义的非静态C函数和全局变量。
    - 只被自己定义和引用的局部符号。对应带static属性的C函数和全局变量。在自己模块中任何位置都可见，但是不能被其他模块引用。

2. .symtab中的符号表不包含对应于本地非静态程序变量的任何符号。这些符号在运行时在栈中被管理。